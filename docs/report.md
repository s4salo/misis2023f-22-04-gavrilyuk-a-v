# Вопрос: СУБД - табличные/реляционные (SQL)
# Подготовил: Гаврилюк А.В. БПМ-22-4

## Реляционная модель
Реляционная модель - это интуитивно понятный, наглядный табличный способ представления данных. Каждая строка, содержащаяся в таблице такой базы данных, представляет собой запись с уникальным идентификатором, который называют ключом. Столбцы таблицы являются атрибутами, а каждая запись содержит значение для каждого атрибута. Это дает возможность устанавливать взаимосвязь между элементами данных.

## Реляционная база данных
Реляционная база данных — это составленная по реляционной модели база данных, в которой данные, занесенные в таблицы, имеют изначально заданные отношения. Сами таблицы в такой базе данных также соотносятся друг с другом строго определенным образом с помощью первичных и внешних ключей.

## SQL
Для взаимодействия с любой реляционной базой данных используется SQL — язык структурированных запросов. Это основа интерфейса систем управления базами данных. Он включает в себя такие операции, как создание таблиц (CREATE TABLE), вставка данных (INSERT), обновление данных (UPDATE), удаление данных (DELETE) и получение данных (SELECT).

Фильтрация и сортировка данных реализуются с помощью соответствующих ключевых слов - WHERE и ORDER BY. Агрегатные функции такие как COUNT(), SUM(), AVG() и др. служат для суммирования и статистической обработки данных, используются в связке с GROUP BY. 

## Транзакции
Транзакция — это комплекс последовательных SQL-запросов, имеющих определенную цель. Транзакции используют тогда, когда нужно обеспечить атомарность запросов, а также согласованность данных.<br/>
Все транзакции должны отвечать четырем требованиям ___ACID___:

* Атомарность — транзакция является неделимым блоком и выполняется или полностью, или никак.
* Согласованность — завершенная транзакция сохраняет согласованность базы данных.
* Изолированность — параллельные транзакции не могут влиять друг на друга.
* Устойчивость — никакой сбой в системе не может влиять на результат завершенной транзакции.

Пример простой транзакции: 
``` sql
BEGIN TRANSACTION;
   -- Добавление нового заказа
   INSERT INTO Orders (OrderID, UserID, TotalAmount)
   VALUES (1, 123, 50.00);

   -- Обновление информации о пользователе
   UPDATE Users
   SET TotalOrders = TotalOrders + 1
   WHERE UserID = 123;

IF <условие_ошибки> THEN
    ROLLBACK;
ELSE
    COMMIT;

END IF;
```
При параллельной работе транзакций могут возникать различные аномалии, поэтому в транзакции предусмотрены уровни изоляции:
* READ UNCOMMITTED: Самый низкий уровень изоляции, при котором разрешены феномены потерянных записей и грязных чтений.
* READ COMMITTED: Запрещает грязное чтение, но по-прежнему допускает повторяемые чтения и фантомное чтение.
* REPEATABLE READ: Исключает возможность повторяемых чтений, но всё ещё допускает возможность фантомного чтения.
* SERIALIZABLE: Самый высокий уровень изоляции, исключающий все предыдущие феномены, но может привести к замедлению работы системы из-за блокировок.  

## Процедуры и триггеры
* Процедуры — это наборы SQL-инструкций, которые выполняются как единый блок. Они могут принимать параметры и возвращать результаты. Они обеспечивают повышение безопасности, так как предоставляют дополнительный уровень контроля над операциями с данными, а также облегчают обслуживание базы данных, ведь процедуру можно менять отдельно.<br/>

* Триггеры — это специальные типы хранимых процедур, которые автоматически запускаются, когда происходят определенные события в базе данных, как, например, вставка, обновление или удаление записей. С их помощью можно обеспечить дополнительную логику работы с данными, поддерживать целостность данных.

## Пользовательские функции в SQL
В SQL также существует возможность создания пользовательских функций. Пользовательские функции позволяют определить собственные операции, которые можно использовать в запросах и других частях SQL-кода.
``` sql
CREATE FUNCTION square_sum(a INT, b INT)
RETURNS INT
BEGIN
    DECLARE result INT;
    SET result = a * a + b * b;
    RETURN result;
END;
```
## Индексы
Индексы представляют собой структуры данных, создаваемые на основе одного или нескольких столбцов таблицы. В SQL индексы используются для ускорения выполнения запросов и повышения производительности базы данных.<br/>
Существует несколько типов индексов:
* Уникальный индекс: гарантирует уникальность значений в индексируемом столбце или наборе столбцов. Позволяет быстро проверять уникальность значений и обеспечивает быстрый доступ к данным.
* Кластерный индекс: определяет физический порядок данных в таблице. Каждая таблица может иметь только один кластерный индекс. Кластерный индекс оптимизирует поиск записей, но при этом он может замедлить операции вставки и обновления.
* Некластерный индекс: создается на основе столбцов, не участвующих в определении порядка данных в таблице. Некластерный индекс может быть создан на одном или нескольких столбцах и может быть использован для быстрого поиска данных.
* Полнотекстовый индекс: используется для поиска текстовых данных в больших объемах текста. Обеспечивает быстрый и эффективный поиск по ключевым словам и фразам.
  
## ORM
ORM - это технология программирования, которая позволяет работать с базой данных, описывая структуру данных в виде классов.ORM-система преобразует эти описания в соответствующие SQL-запросы. ORM используют кэширование объектов, запросов и страниц результатов для повышения скорости, эффективности работы.
## Заключение
Реляционная модель является одной из самых распространенных и популярных моделей хранения и обработки данных. Она отличается простотой, наглядностью представления информации и возможностью устанавливать отношения между объектами.
SQL - это язык для работы с любыми реляционными СУБД. Он позволяет создавать, изменять и запрашивать данные, а также определять сложную бизнес-логику при помощи процедур, функций и триггеров.
ORM позволяет эффективно интегрировать реляционные базы данных в объектно-ориентированные языки программирования. ORM существенно упрощает работу с данными и повышает производительность за счет автоматической генерации SQL и кэширования. 

## Источники
https://www.oracle.com/cis/database/what-is-a-relational-database/
https://docs.oracle.com/cd/E15846_01/doc.21/e15226/trig_stored_proc.htm#RPTSS193
https://people.inf.elte.hu/kiss/DB/fundamentals-of-database-systems.pdf


